<!DOCTYPE html>
<html lang="zh">
<head>
    <meta charset="UTF-8">
    <title>欢迎页</title>
    <style type="text/css">
        .center {
            text-align: center;
            position: relative;
            margin-top: 40px;
            padding: 20px 0;
        }

        .base {
            width: 98%;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
        }

        .active-center {
            border: 2px solid;
            position: absolute;
            top: 50%;
            left: 50%;
            transform: translate(-50%, -50%);
            display: none;
        }

    </style>
</head>
<body>
<div class="base">
    <div class="center"><label for="file-input" id="hello" style="font-size: 250%">尊敬的用户您好，<b>我是你爹</b></label></div>
    <div class="center">
        <form action="/upload/" class="active-center" enctype="multipart/form-data" id="fileSubmit" method="post">
            <input id="file-input" name="uploadFiles" type="file"/>
        </form>
        <div id="mess"></div>
    </div>

    <div class="center">
        <button onclick="window.location.href='/html/软件测试实验1.html'">软件测试实验</button>
    </div>

    <div class="center">
        <button onclick="window.location.href='/html/操作系统实验.html'">操作系统实验</button>
    </div>

    <div class="center">
        <button onclick="window.location.href='/html/幻影坦克.html'">幻影坦克</button>
        (Created by <a href="https://github.com/wytk/">wytk</a>)
    </div>

</div>
<script>
    (function () {

        let f_input = document.getElementById("file-input");
        let fileSubmit = document.getElementById("fileSubmit");
        f_input.multiple = "multiple";
        f_input.onchange = function () {
            fileSubmit.submit()
        };
        let hello = document.getElementById("hello");
        hello.title = "点击上传文件";

    })();
    (function () {
        let hello = document.getElementById("hello");
        let expr = /[cC]ommunism/;
        if (expr.test(document.cookie) || expr.test(window.location.search) || new Date().toLocaleDateString().endsWith("7/1")) {
            let strs = [
                "“如果我们选择了最能为人类福利而劳动的职业，”“那么，重担就不能把我们压倒，因为这是为大家而献身；”",
                "“那时我们所感到的就不是可怜的、有限的、自私的乐趣,”“我们的幸福将属于千百万人，”",
                "<img src='images/Danghui.svg' alt=\"党徽\"/>",
                "我们的事业将默默地，但永恒发挥作用地存在下去",
                "而面对我们的骨灰，高尚的人们将洒下热泪。",
                "<i style='font-size: medium;color: gray; text-align: right'>——卡尔·马克思</i>"
            ];
            hello.innerHTML = `<a style='font-size: medium;'>${strs[0]}<br/>${strs[1]}</a> <br />${strs[2]}<br />${strs[3]}<br />${strs[4]}<br />${strs[5]}`;
            setTimeout(function () {
                if (!expr.test(document.cookie)) {
                    setTimeout(function () {
                        let today = new Date();
                        today.setDate(today.getDate() + 1);
                        document.cookie = "mode=communism;expires=" + today.toUTCString() + ";path=/html";
                    }, 1);

                }
            }, 5);
        }
    })();
    (function () {
        let hello = document.getElementById("hello");
        let expr = /anti[-_]?entropy/;
        if (expr.test(document.cookie) || expr.test(window.location.search) || new Date().toLocaleDateString().endsWith("7/1")) {
            hello.innerHTML = `<a style='font-size: medium;'>人类有人类的底蕴</a> <br /><img src='images/Anti-Entropy.svg' style='width: 500px;' alt="逆熵"/><br /> 向一切虚伪的美好宣战`;
            setTimeout(function () {
                if (!expr.test(document.cookie)) {
                    setTimeout(function () {
                        let today = new Date();
                        today.setDate(today.getDate() + 1);
                        document.cookie = "mode=anti_entropy;expires=" + today.toUTCString() + ";path=/html";
                    }, 1);

                }
            }, 5);
        }
    })();
    (function () {
        let mess = document.getElementById("mess");
        let reqs = window.location.search.replace(/^\?/, "").split('&');
        let text = "";
        for (let i = 0; i < reqs.length; i++) {
            if (/^fileUploaded=(.*)$/g.test(reqs)) {
                let rx = RegExp.$1.split(',');
                for (let j = 0; j < rx.length; j++) {
                    text += `<a href='${rx[j]}'>${decodeURI(rx[j])}</a>上传完成`;
                }
            }
            if (/^failUploaded=(.*)$/g.test(reqs)) {
                text += RegExp.$1 + "上传失败";
            }
        }
        mess.innerHTML = text;
    })();
</script>
</body>
</html>